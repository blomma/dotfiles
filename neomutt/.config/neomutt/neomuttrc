# Paths ----------------------------------------------
set alias_file       = ~/.mutt/alias		# where to store aliases
set folder           = ~/.mail				# mailbox location
set mailcap_path     = ~/.config/neomutt/mailcap		# entries for filetypes
set message_cachedir = /tmp/				# where to store bodies
set signature        = ~/.mutt/sig			# my signature file
set tmpdir           = ~/.config/neomutt/tmp/				# where to keep temp files
set header_cache     = ~/.config/neomutt/tmp/
set header_cache_backend = lmdb

# Sidebar ----------------------------------------------
set sidebar_visible
set sidebar_short_path
set sidebar_folder_indent
set sidebar_width = 25
set sidebar_divider_char = '│'
set sidebar_indent_string = '  ''
set sidebar_format = "%B %* [%?N?%N / ?%S]"
set mail_check_stats
set sidebar_delim_chars = '/'

# Sidebar Navigation
bind index,pager <down> sidebar-next
bind index,pager <up> sidebar-prev
bind index,pager <right> sidebar-open

# Toggle the visibility of the Sidebar.
bind index,pager B sidebar-toggle-visible

# Mailboxes to show in the sidebar.
named-mailboxes blomma/Inbox =blomma/INBOX blomma/Drafts =blomma/INBOX.Drafts blomma/Archive =blomma/INBOX.Archive blomma/Lists =blomma/INBOX.Lists blomma/Sent =blomma/INBOX.Sent blomma/Notes =blomma/INBOX.Notes blomma/Trash =blomma/INBOX.Trash blomma/Spam =blomma/INBOX.Spam blomma/LSpam =blomma/INBOX.LSpam

named-mailboxes mother/Inbox =mother/INBOX mother/Drafts =mother/Drafts mother/Sent =mother/Sent mother/Spam =mother/Spam mother/Trash =mother/Trash

# Mailbox ----------------------------------------------
set mbox_type	= Maildir

folder-hook . 'set read_inc=1000'

# This variable specifies notmuch query type,
# supported types: 'threads' and 'messages'.
set nm_query_type = threads

# Basic Options --------------------------------------
alternative_order text/plain text/enriched text/html                   # save html for last
auto_view text/html                                                    # autoview html

set rfc2047_parameters  = yes
set date_format			= "%d-%m-%y"                                   # a simple date format
set delete				# don't ask, just do
set edit_headers		= no
set editor				= "nvim '+set filetype=Mail'"
set fast_reply                                                         # do not ask for to, subject, etc when replying
set forward_format		= "Fwd: %s"                                    # when forwarding email, simply add a Fwd to the subject
set help				= no
set include                                                            # always include message when replying
set index_format		= "[%Z]%?X?A& ?  %D  %-20.20F  %s"                     # format of the index view, show all flags, date, the sender and finally the subject
set mail_check			= 60		# minimum time between scans
set menu_scroll                                                        # scroll in menus
set pager_context		= 5                                            # When going to the next page, keep the bottom two lines of this page on top so that I have some context
set pager_index_lines	= 10                                           # number of index lines to show
set pager_stop			= yes                                          # If I'm at the end of a message and I try to go to the next page, don't move me to the next message
set pipe_decode			# strip headers and eval mimes when piping
set reply_regexp		= "^(([Rr][Ee]?(\[[0-9]+\])?: *)?(\[[^]]+\] *)?)*"
set smart_wrap                                                         # dont wrap mid word
set sort				= threads                                      # like gmail
set sort_aux			= reverse-last-date-received                   # like gmail
set sort_re                                                            # thread based on regex
set status_chars		= " *%A"
set status_format		= "───[ Folder: %f ]───[%r%m messages%?n? (%n new)?%?d? (%d to delete)?%?t? (%t tagged)? ]───%>─%?p?( %p postponed )?───"
set text_flowed         = yes
set timeout				= 60		# idle time before scanning
set uncollapse_jump                                                    # don't collapse on an unread message
set wait_key			= no		# Don't ask me to press a key to continue
unset confirmappend		# When saving a message, append the message to an existing mailbox without asking (Why should it ask, anyway? Mailboxes generally have multiple messages...)
unset mark_old			# read/new is good enough for me
unset markers                                                          # In the pager, don't display + at the beginning of wrapped lines; it's distracting

# Query command
set query_command = "notmuch address --deduplicate=address --output=recipients from:%s or to:%s"
set query_format="%4c %t %-70.70a %-70.70n %?e?(%e)?"
bind editor <Tab> complete-query
bind editor ^T complete

# Macros and Keybindings ----------------------------------------------
bind pager j next-line
bind pager k previous-line

macro index,pager C "<vfolder-from-query>" "Search mailbox"
macro pager \Cb "|urlview<enter>" "call urlview to open links"


#sync email
macro index,pager O "<shell-escape>offlineimap<enter>" "run offlineimap to sync all mail"

# Sending ----------------------------------------------
set realname		= "Mikael Hultgren"

# Header Options ----------------------------------------------
ignore *                                                               # ignore all headers
unignore from date subject to cc
unignore organization organisation x-mailer: x-newsreader: x-mailing-list:
unignore posted-to:
#unignore from: to: cc: date: subject:                                  # show only these
unhdr_order *                                                          # some distros order things by default
hdr_order from: to: cc: date: subject:                                 # and in this order

# Colors ----------------------------------------------
source ~/.config/neomutt/themes/gruvbox-powerline
# source ~/.config/neomutt/themes/powerline

source ~/.config/neomutt/accounts/blomma
folder-hook blomma/* source ~/.config/neomutt/accounts/blomma
folder-hook mother/* source ~/.config/neomutt/accounts/mother

push <show-version>
